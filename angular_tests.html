<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
		<title>ML-PLan</title>
		<script src="jquery-3.3.1.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
        <link rel="stylesheet" href ="CSS/style.css">
        <link rel="stylesheet" href ="CSS/style_sub.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		
	</head>
	<body>

            <script>
                class Component{
                    constructor(name, reqInterface, providedInterface, param, dependency){
                        this.name = name;
                        this.reqInterface = reqInterface;
                        this.providedInterface = providedInterface;
                        this.param = param;
                        this.dependency = dependency;
                    }
                }; 
        
                class reqInterface{
                    constructor(id, name, prio){
                        this.id = id;
                        this.name = name;
                        this.prio = prio;
                    }
                };  
        
                class providedInterface{
                    constructor(interfaces){
                        this.interfaces = interfaces;
                    }
                };
 
                class param{
                    constructor(name, defaultVal, prio, paramtype){
                        this.name = name;
                        this.defaultVal = defaultVal;
                        this.prio = prio;
                        this.paramtype = paramtype;
                    }
                };
        
                    class dependency{
                        constructor(pre, post){
                            this.pre = pre;
                            this.post = post;
                        }
                    }; 
        
                    var ComponentApp = angular.module('ComponentCreationApp',[]);
                    
                    ComponentApp.controller('ComponentCreationController', function($scope){
                            $scope.reqInterfaces = [];
                            $scope.providedInterfaces = [];
                            $scope.parameters =[];
                            $scope.type =["bool","cat","number"];
                            $scope.selectedType = $scope.type[0];

                            $scope.addReqInterface = function(){
                                $scope.errortext="";
                                if(!($scope.reqInterfaces.indexOf($scope.addReqInterface)== -1)){
                                    $scope.errortext="The requiered Interface is allready added";
                                }else{
                                    $scope.reqInterfaces.push(new reqInterface(null,null,null));
                                }
                            }

                            $scope.addProvidedInterface = function(){
                                $scope.errortext = "";
                                if(!($scope.providedInterfaces.indexOf($scope.addProvidedInterface)== -1)){
                                    $scope.errortext="The provided Interface is allready added";
                                }
                                else{
                                    $scope.providedInterfaces.push(new providedInterface(null,null,null));
                                }
                            }

                            $scope.addParameter = function(){
                                $scope.errortext="";
                                if(!($scope.parameters.indexOf($scope.addParameter)== -1)){
                                    $scope.errortext="The parameter is allready added";
                                }else{
                                    $scope.parameters.push(new param(null,null,null,"bool"));
                                }
                            }

                            $scope.addCat = function(x){
                                $scope.parameters[x].paramtype.push(new Cat());
                            }

                            $scope.removeReqInterface = function(x){
                                $scope.reqInterfaces.splice(x,1);
                            }

                            $scope.removeProvidedInterface = function(x){
                                $scope.errortext="";
                                $scope.providedInterfaces.splice(x,1);
                            }

                            $scope.removeParameter = function(x){
                                $scope.errortext="";
                                $scope.parameters.splice(x,1);
                            }

                        }
                    );
                    
                </script>


        <div ng-app="ComponentCreationApp" ng-controller="ComponentCreationController">

          <div id="componentNameSpace">
            <div><label>Component name:</label><input type="text" ng-model="componentName"></div>
          </div>

          <button ng-click="addReqInterface()">Add required Interface</button>
              <div id = "reqInterfaceSpace">
				<div ng-repeat="x in reqInterfaces">
                    <div>
                        <div class="button-wrapper">
                            <button ng-click="removeReqInterface($index)">&times </button>
                        </div>
                        <div>
                            <div><label>ID:</label><input type="text" ng-model="x.id"></div>
                            <div><label>Name:</label><input type="text" ng-model="x.name"></div>
                            <div><label>Prio:</label> <input type="text" ng-model="x.prio"></div>
                        </div>    
                    </div>
				</div>
            </div>             
            
            <button ng-click="addProvidedInterface()">Add povided Interface </button>
            <div id="providedInterfaceSpace">
                <div ng-repeat="x in providedInterfaces">
                    <div>
                        <div class="button-wrapper">
                            <button ng-click="removeProvidedInterface($index)">&times </button>
                        </div>
                        <div id ="input-wrapper">
                            <div><label>Interface:</label> <input type="text" ng-model="x.interfaces"></div>
                        </div>
                    </div>
                </div>
            </div>

            <button ng-click="addParameter()">Add prameter </button>
            <div id="ParameterSpace">
                <div ng-repeat="x in parameters">
                    <div>
                        <div class="button-wrapper">
                            <button ng-click="removeParameter($index)">&times </button>
                        </div>
                        <div id ="input-wrapper">
                            <div><label>Name:</label> <input type="text" ng-model="x.name"></div>
                            <div><label>Prority:</label> <input type="text" ng-model="x.prio"></div>
                            <div><label>Default:</label> <input type="text" ng-model="x.defaultVal"></div> 
                            <select ng-model="x.paramtype" ng-options="x for x in type"></select>
                            <div>
                                <div ng-show="x.paramtype=='cat'">
                                    <div class="button-wrapper">
                                        <button>Add cat</button>
                                    </div>
                                </div>
                                <div ng-show="x.paramtype=='number'">
                                        <div>

                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>